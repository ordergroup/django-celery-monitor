{% extends "admin/base_site.html" %}
{% load static %}

{% block title %}Task {{ task.task_id }}{% endblock %}

{% block extrastyle %}
<link rel="stylesheet" href="{% static 'celery_monitor/monitor.css' %}">
{% endblock %}

{% block content %}
<a href="{% url 'admin:celery_monitor_dashboard' %}" class="back-link">&larr; Back to Dashboard</a>

<h2 class="section-title">Task Details</h2>
<div class="detail-grid">
  <div class="label">Task ID</div>
  <div class="value task-id-mono">{{ task.task_id }}</div>

  <div class="label">Task Name</div>
  <div class="value">{{ task.task_name|default:"-" }}</div>

  <div class="label">Periodic Task</div>
  <div class="value">{{ task.periodic_task_name|default:"-" }}</div>

  <div class="label">Status</div>
  <div class="value"><span class="status-badge {{ task.status }}">{{ task.status }}</span></div>

  <div class="label">Worker</div>
  <div class="value">{{ task.worker|default:"-" }}</div>

  <div class="label">Created</div>
  <div class="value">{{ task.date_created }}</div>

  <div class="label">Started</div>
  <div class="value">{{ task.date_started|default:"-" }}</div>

  <div class="label">Completed</div>
  <div class="value">{{ task.date_done }}</div>
</div>

<h2 class="section-title">Parameters</h2>
<div class="detail-grid">
  <div class="label">Args</div>
  <div class="value"><code>{{ task.task_args|default:"-" }}</code></div>

  <div class="label">Kwargs</div>
  <div class="value"><code>{{ task.task_kwargs|default:"-" }}</code></div>
</div>

<h2 class="section-title">Result</h2>
<pre class="code-block">{{ task.result|default:"No result data" }}</pre>

{% if task.traceback %}
<h2 class="section-title">Traceback</h2>
<pre class="code-block">{{ task.traceback }}</pre>
{% endif %}

{% if task.meta %}
<h2 class="section-title">Meta</h2>
<pre class="code-block">{{ task.meta }}</pre>
{% endif %}
{% endblock %}
